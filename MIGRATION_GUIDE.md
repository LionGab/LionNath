# üîÑ Guia de Migra√ß√£o para Design System Bubblegum

> **Como migrar do c√≥digo antigo para os novos componentes**

---

## üìã Vis√£o Geral

Este guia mostra como substituir c√≥digo antigo (hardcoded, TouchableOpacity manual, TextInput manual) pelos **novos componentes do Design System Bubblegum**.

---

## ‚úÖ Componentes Migrados

### **Telas Completamente Refatoradas**
- ‚úÖ **OnboardingScreen.tsx** - 100% migrado
- ‚úÖ **HomeScreen.tsx** - 100% migrado

### **Telas Pendentes de Migra√ß√£o**
- ‚è≥ **ChatScreen.tsx** - Aguardando migra√ß√£o
- ‚è≥ **DailyPlanScreen.tsx** - Aguardando migra√ß√£o
- ‚è≥ **ProfileScreen.tsx** - Aguardando migra√ß√£o

---

## üîÑ Migra√ß√µes Realizadas

### **1. Bot√µes: TouchableOpacity ‚Üí Button**

#### **Antes**
```typescript
<TouchableOpacity
  style={{
    backgroundColor: '#DD5B9A',
    padding: 16,
    borderRadius: 12,
    alignItems: 'center',
  }}
  onPress={handleSubmit}
>
  <Text style={{ color: '#FFF', fontSize: 16, fontWeight: 'bold' }}>
    Enviar
  </Text>
</TouchableOpacity>
```

#### **Depois**
```typescript
import { Button } from '../components';

<Button
  variant="primary"
  onPress={handleSubmit}
  accessibilityLabel="Enviar formul√°rio"
>
  Enviar
</Button>
```

#### **Benef√≠cios**
- ‚úÖ 12 linhas ‚Üí 1 linha
- ‚úÖ 100% tema Bubblegum
- ‚úÖ Acessibilidade completa (accessibilityRole, accessibilityState)
- ‚úÖ 5 variantes prontas (primary, secondary, outline, ghost, destructive)
- ‚úÖ Estados de loading autom√°ticos

---

### **2. Inputs: TextInput ‚Üí Input**

#### **Antes**
```typescript
<Text>Nome:</Text>
<TextInput
  style={{
    backgroundColor: '#F2F1E8',
    borderRadius: 12,
    padding: 12,
    fontSize: 16,
    borderWidth: 1,
    borderColor: '#DD5B9A',
  }}
  placeholder="Digite seu nome"
  value={name}
  onChangeText={setName}
/>
```

#### **Depois**
```typescript
import { Input } from '../components';

<Input
  label="Nome"
  value={name}
  onChangeText={setName}
  placeholder="Digite seu nome"
  icon="account"
  required
/>
```

#### **Benef√≠cios**
- ‚úÖ 100% tema Bubblegum
- ‚úÖ Label integrada
- ‚úÖ √çcones opcionais
- ‚úÖ Estados de erro autom√°ticos
- ‚úÖ Helper text embutido
- ‚úÖ Valida√ß√£o visual
- ‚úÖ Altura m√≠nima de 48px (WCAG)

---

### **3. Cards: View manual ‚Üí Card**

#### **Antes**
```typescript
<View
  style={{
    backgroundColor: '#F2F1E8',
    padding: 16,
    borderRadius: 12,
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 2 },
    shadowOpacity: 0.1,
    shadowRadius: 4,
    elevation: 3,
  }}
>
  <Text style={{ fontSize: 20, fontWeight: 'bold', color: '#DD5B9A' }}>
    T√≠tulo
  </Text>
  <Text style={{ fontSize: 16, color: '#696969' }}>
    Conte√∫do do card...
  </Text>
</View>
```

#### **Depois**
```typescript
import { Card } from '../components';

<Card
  title="T√≠tulo"
  icon="heart"
  variant="elevated"
>
  <Text style={styles.content}>Conte√∫do do card...</Text>
</Card>
```

#### **Benef√≠cios**
- ‚úÖ 100% tema Bubblegum
- ‚úÖ 3 variantes (elevated, outlined, flat)
- ‚úÖ T√≠tulo e √≠cone integrados
- ‚úÖ Sombras consistentes
- ‚úÖ Clic√°vel opcional (onPress)

---

### **4. Emojis ‚Üí √çcones**

#### **Antes**
```typescript
<Text>üëã Ol√°, Maria!</Text>
<Text>üíï Semana 24 de gesta√ß√£o</Text>
<Text>ü•ó Alimenta√ß√£o saud√°vel</Text>
```

#### **Depois**
```typescript
import Icon from 'react-native-vector-icons/MaterialCommunityIcons';

<View style={styles.greetingContainer}>
  <Icon name="hand-wave" size={24} color={colors.primary} />
  <Text>Ol√°, Maria!</Text>
</View>

<View style={styles.subGreetingContainer}>
  <Icon name="heart-pulse" size={18} color={colors.destructive} />
  <Text>Semana 24 de gesta√ß√£o</Text>
</View>

<View style={styles.preferenceContainer}>
  <Icon name="food-apple" size={20} color={colors.primary} />
  <Text>Alimenta√ß√£o saud√°vel</Text>
</View>
```

#### **Benef√≠cios**
- ‚úÖ √çcones profissionais
- ‚úÖ Escal√°veis (SVG)
- ‚úÖ Cores tem√°ticas
- ‚úÖ Melhor para leitores de tela

---

## üìù Checklist de Migra√ß√£o

Use esta checklist ao migrar uma tela:

### **Imports**
- [ ] Remover `TextInput` se n√£o for mais usado
- [ ] Adicionar `import { Button, Card, Input, Badge } from '../components'`
- [ ] Adicionar `import Icon from 'react-native-vector-icons/MaterialCommunityIcons'`

### **Estrutura**
- [ ] Adicionar `SafeAreaView` como container principal
- [ ] Adicionar `StatusBar` com `barStyle="dark-content"`
- [ ] Manter `ScrollView` se conte√∫do for din√¢mico

### **Bot√µes**
- [ ] Substituir todos `TouchableOpacity` por `<Button>`
- [ ] Adicionar `accessibilityLabel` obrigat√≥rio
- [ ] Escolher variante apropriada (primary, secondary, outline, ghost, destructive)
- [ ] Adicionar `icon` quando relevante

### **Inputs**
- [ ] Substituir todos `TextInput` por `<Input>`
- [ ] Adicionar `label` descritiva
- [ ] Adicionar `icon` relevante
- [ ] Marcar `required` quando obrigat√≥rio
- [ ] Adicionar `error` para valida√ß√£o

### **Cards**
- [ ] Substituir `View` de containers por `<Card>`
- [ ] Extrair t√≠tulos para prop `title`
- [ ] Adicionar `icon` quando relevante
- [ ] Escolher `variant` (elevated, outlined, flat)

### **Emojis**
- [ ] Substituir todos emojis por `<Icon>`
- [ ] Escolher √≠cone apropriado do MaterialCommunityIcons
- [ ] Aplicar `color` do tema (colors.primary, colors.destructive, etc.)
- [ ] Definir `size` apropriado (16, 20, 24, 32)

### **Estilos**
- [ ] Remover hardcoded colors ‚Üí usar `colors.*`
- [ ] Remover hardcoded spacing ‚Üí usar `spacing.*`
- [ ] Remover hardcoded fontSize ‚Üí usar `typography.sizes.*`
- [ ] Remover hardcoded borderRadius ‚Üí usar `borderRadius.*`
- [ ] Adicionar `fontFamily: typography.fontFamily.sans` em textos

### **Acessibilidade**
- [ ] Todos bot√µes com `accessibilityLabel`
- [ ] Todos bot√µes com `accessibilityHint` (recomendado)
- [ ] Inputs com `accessibilityLabel`
- [ ] Cards clic√°veis com `accessibilityLabel`
- [ ] Componentes decorativos com `accessible={false}`

---

## üéØ Exemplos Completos de Migra√ß√£o

### **Exemplo 1: OnboardingScreen (Step 1 - Input de Nome)**

#### **Antes**
```typescript
<TextInput
  style={styles.input}
  placeholder="Digite seu nome"
  value={name}
  onChangeText={setName}
/>

// Estilos
const styles = StyleSheet.create({
  input: {
    backgroundColor: '#F2F1E8',
    borderRadius: 12,
    padding: 12,
    fontSize: 16,
    marginBottom: 16,
    borderWidth: 1,
    borderColor: '#DD5B9A',
  },
});
```

#### **Depois**
```typescript
<Input
  label="Nome completo"
  value={name}
  onChangeText={setName}
  placeholder="Digite seu nome"
  icon="account"
  required
/>

// Estilos: N√£o necess√°rio! Componente j√° estilizado
```

---

### **Exemplo 2: HomeScreen (Bot√£o de Emerg√™ncia)**

#### **Antes**
```typescript
<TouchableOpacity
  style={styles.emergencyButton}
  onPress={() =>
    Alert.alert(
      'Emerg√™ncia',
      'Ligue para o SAMU: 192',
      [{ text: 'Entendi' }]
    )
  }
>
  <Icon name="alert-circle" size={24} color="#FFF" />
  <Text style={styles.emergencyButtonText}>Emerg√™ncia - SAMU 192</Text>
</TouchableOpacity>

// Estilos
const styles = StyleSheet.create({
  emergencyButton: {
    flexDirection: 'row',
    backgroundColor: '#D65152',
    padding: 16,
    borderRadius: 12,
    alignItems: 'center',
    justifyContent: 'center',
    gap: 12,
    minHeight: 56,
  },
  emergencyButtonText: {
    color: '#FFF',
    fontSize: 18,
    fontWeight: 'bold',
  },
});
```

#### **Depois**
```typescript
import { Linking } from 'react-native';

<Button
  variant="destructive"
  size="lg"
  fullWidth
  icon="phone-alert"
  onPress={() => {
    Alert.alert(
      'üö® Emerg√™ncia',
      'Voc√™ ser√° direcionado para ligar para o SAMU (192).',
      [
        { text: 'Cancelar', style: 'cancel' },
        {
          text: 'Ligar Agora',
          style: 'destructive',
          onPress: () => Linking.openURL('tel:192')
        }
      ]
    );
  }}
  accessibilityLabel="Bot√£o de emerg√™ncia"
  accessibilityHint="Ligar para SAMU 192 em caso de emerg√™ncia m√©dica"
  style={styles.emergencyButton}
>
  Emerg√™ncia - SAMU 192
</Button>

// Estilos
const styles = StyleSheet.create({
  emergencyButton: {
    marginHorizontal: spacing.lg,
    marginBottom: spacing['3xl'],
  },
});
```

---

### **Exemplo 3: HomeScreen (Card de Plano Di√°rio)**

#### **Antes**
```typescript
<View style={styles.dailyPlanCard}>
  <View style={styles.dailyPlanHeader}>
    <Icon name="target" size={24} color="#DD5B9A" />
    <Text style={styles.dailyPlanTitle}>Seu Plano de Hoje</Text>
  </View>
  <Text style={styles.priorityItem}>1. Consulta m√©dica</Text>
  <Text style={styles.priorityItem}>2. Caminhada</Text>
</View>

// Estilos
const styles = StyleSheet.create({
  dailyPlanCard: {
    backgroundColor: '#F2F1E8',
    padding: 16,
    borderRadius: 12,
    shadowColor: '#000',
    shadowOpacity: 0.1,
    shadowRadius: 4,
    elevation: 3,
  },
  dailyPlanHeader: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 8,
    marginBottom: 16,
  },
  dailyPlanTitle: {
    fontSize: 20,
    fontWeight: 'bold',
    color: '#DD5B9A',
  },
  priorityItem: {
    fontSize: 16,
    color: '#696969',
    marginTop: 8,
  },
});
```

#### **Depois**
```typescript
<Card
  title="Seu Plano de Hoje"
  icon="target"
  variant="elevated"
  style={styles.dailyPlanCard}
>
  <Text style={styles.priorityItem}>‚Ä¢ Consulta m√©dica</Text>
  <Text style={styles.priorityItem}>‚Ä¢ Caminhada</Text>
</Card>

// Estilos
const styles = StyleSheet.create({
  dailyPlanCard: {
    marginHorizontal: spacing.lg,
    marginBottom: spacing.lg,
  },
  priorityItem: {
    fontSize: typography.sizes.base,
    color: colors.mutedForeground,
    marginTop: spacing.sm,
    lineHeight: 24,
    fontFamily: typography.fontFamily.sans,
  },
});
```

---

## üîß Ferramentas de Migra√ß√£o

### **Buscar Padr√µes Antigos**
Use estes comandos para encontrar c√≥digo que precisa migra√ß√£o:

```bash
# Buscar cores hardcodadas
grep -r "#[0-9A-Fa-f]\{6\}" src/screens/

# Buscar TextInput sem componente
grep -r "TextInput" src/screens/ | grep -v "import"

# Buscar TouchableOpacity
grep -r "TouchableOpacity" src/screens/

# Buscar emojis
grep -r "[üòÄ-üôè]" src/screens/
```

---

## üìä Progresso de Migra√ß√£o

### **OnboardingScreen.tsx** ‚úÖ 100%
- ‚úÖ 4 TextInput ‚Üí Input
- ‚úÖ 2 TouchableOpacity ‚Üí Button (Pr√≥ximo, Voltar)
- ‚úÖ 3 op√ß√µes de tipo (Gestante, M√£e, Tentante) com √≠cones
- ‚úÖ 7 prefer√™ncias com √≠cones
- ‚úÖ SafeAreaView + StatusBar
- ‚úÖ Todos emojis ‚Üí √≠cones

### **HomeScreen.tsx** ‚úÖ 100%
- ‚úÖ 3 Cards manuais ‚Üí Card component
- ‚úÖ 2 TouchableOpacity ‚Üí Button (Plano Di√°rio, Emerg√™ncia)
- ‚úÖ QuickActionButton ainda manual (aceit√°vel)
- ‚úÖ SafeAreaView + StatusBar j√° presente
- ‚úÖ Emoji no greeting ‚Üí √≠cone
- ‚úÖ Bot√£o emerg√™ncia funcional (liga para 192)

### **ChatScreen.tsx** ‚è≥ 0%
- ‚è≥ Bot√£o SOS ‚Üí Button component
- ‚è≥ Mensagens ‚Üí Card (opcional)
- ‚è≥ SafeAreaView + StatusBar
- ‚è≥ Emojis ‚Üí √≠cones

### **DailyPlanScreen.tsx** ‚è≥ 0%
- ‚è≥ 3 Cards manuais ‚Üí Card component
- ‚è≥ Bot√£o refresh ‚Üí Button
- ‚è≥ SafeAreaView + StatusBar

### **ProfileScreen.tsx** ‚è≥ 0%
- ‚è≥ Cards de info ‚Üí Card component
- ‚è≥ Bot√µes de a√ß√£o ‚Üí Button
- ‚è≥ Inputs (se houver edi√ß√£o) ‚Üí Input

---

## üéØ Pr√≥ximos Passos

1. **ChatScreen** (pr√≥xima prioridade)
   - Migrar bot√£o SOS para `<Button variant="destructive">`
   - Adicionar SafeAreaView
   - Substituir emojis por √≠cones

2. **DailyPlanScreen**
   - Migrar cards para `<Card>`
   - Migrar bot√£o refresh para `<Button>`

3. **ProfileScreen**
   - Migrar cards de informa√ß√£o para `<Card>`
   - Migrar bot√µes de a√ß√£o para `<Button>`
   - Se houver edi√ß√£o, usar `<Input>`

4. **Testes End-to-End**
   - Testar navega√ß√£o entre telas
   - Validar acessibilidade
   - Verificar performance

5. **Commit Final**
   - Versionar c√≥digo
   - Atualizar CHANGELOG
   - Documentar breaking changes

---

## üí° Dicas de Migra√ß√£o

### **1. Migre Incrementalmente**
- N√£o migre tudo de uma vez
- Migre uma tela por vez
- Teste ap√≥s cada migra√ß√£o

### **2. Use Find & Replace com Cuidado**
- Cores hexadecimais s√£o seguras de substituir
- Estilos complexos requerem revis√£o manual

### **3. Mantenha Estilos Customizados**
- Nem tudo precisa ser componente
- `QuickActionButton` pode ficar interno na HomeScreen
- Layout espec√≠fico pode ficar em estilos locais

### **4. Teste Acessibilidade**
- Use leitor de tela (TalkBack/VoiceOver)
- Valide contraste com ferramentas online
- Teste √°rea de toque (m√≠nimo 44x44px)

---

**√öltima atualiza√ß√£o**: 2025-10-29
**Vers√£o do Design System**: Bubblegum 1.0
**Telas Migradas**: 2/5 (40%)
**Componentes Criados**: 7 (Button, Card, Input, Badge, Logo, WelcomeHeader, ThemeShowcase)
